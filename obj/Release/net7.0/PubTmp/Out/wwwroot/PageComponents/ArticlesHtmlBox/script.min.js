export class ArticlesHtmlBox{_Target
    _Position
    _Search
    _ApiUrl
    _SessionToken

    _UrlContent
    _Take

    Page

    constructor(n,t,i,r,u){this._Target=n;this._Position=t;this._Search=i;this._ApiUrl=r;this._SessionToken=u;let e="/PageComponents/"+this.constructor.name;this._UrlContent=e+"/content";let f=document.createElement("link");f.setAttribute("rel","stylesheet");f.setAttribute("href",e+"/style.min.css");document.head.append(f);this._Take=20;this.Page=1}async AppendList(){let n=await this._ApiAticles();this.Page==1&&(this._Target.insertAdjacentHTML(this._Position,this._HtmlPart()),n.length==this._Take);n!=null&&n.length>0&&n.forEach(n=>{document.querySelector("#"+this.constructor.name+" > ul").insertAdjacentHTML("beforeend",this._ItemHtmlBox(n)),n.rating!=4&&this._LoadImages(n.titleHb,n.fileUrlSource,n.fileId,n.extension),n.rating==-9223372036854776000&&this._AppendBody(n.titleHb),n.description.length>0&&n.isBody&&document.querySelector('article[data-titleHb="'+n.titleHb+'"] ._Description').addEventListener("click",()=>{this._AppendBody(n.titleHb)})});this.Page++}_HtmlPart(){return'        <div id="'+this.constructor.name+'">            <ul>            <\/ul>        <\/div>'}_ItemHtmlBox(n){return'<li>    <article data-titleHb="'+n.titleHb+'" data-tp="'+n.rating+'" data-isBody="'+n.isBody+'">        <div>            <h1>                <a href="/i/'+n.urlShort+'-">                '+n.title+'                <\/a>            <\/h1>        <\/div>        <img alt="'+n.title+'" src="'+n.fileUrlSource+'" />        <div class="_Description">        '+n.description+'        <\/div>        <div class="_footer">            <a href="/i/-'+n.login.toLowerCase()+'">                <span>                '+n.login+"                <\/span>            <\/a>            <span>            "+this._ConvertDatetimeToShortFormat(n.dt)+'            <\/span>            <a href="/a/'+n.urlShort+'">                <span>                    SOURCE                <\/span>            <\/a>        <\/div>    <\/article><\/li>'}_ConvertDatetimeToShortFormat(n){let r="";const u=["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"];let t=new Date(n),f=new Date;t.setHours(t.getHours()+t.getTimezoneOffset()/-60);let i=t.getMinutes().toString();i.length==1&&(i="0"+i);const e=u[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()+" · "+t.getHours()+":"+i;r=e;let o=parseFloat(Date.now()-t)/6e4;return o>60?(new Date).getFullYear()==t.getFullYear()&&(r=f.getDate()==t.getDate()?t.getHours()+":"+i:u[t.getMonth()]+" "+t.getDate()+" · "+t.getHours()+":"+i):r="",r}_LoadImages(n,t,i,r){let e=document.querySelector('article[data-titleHb="'+n+'"]'),u=e.querySelector("img"),f=new Image(u);f.onload=function(){u.style.display="flex"};f.onerror=function(){let n="https://rt.ink/f/"+i+"."+r.trim();u.setAttribute("src",n);let t=new Image;t.onload=function(){u.style.display="flex"};t.src=n};f.src=t}async _AppendBody(n){let t=await this._ApiArticleBody(n);if(t!=null&&t.body.length>0){let r=document.querySelector('article[data-titleHb="'+n+'"]'),i=r.querySelector("._Description");i.innerHTML=t.body;i.setAttribute("data-body",!0);i.setAttribute("data-isDescription",!0)}}async _ApiAticles(){const n=await fetch(this._ApiUrl+"/RtInk/Articles?search="+this._Search+"&take="+this._Take+"&page="+this.Page,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+this._SessionToken}});return n.ok==!0?await n.json():null}async _ApiArticleBody(n){const t=await fetch(this._ApiUrl+"/RtInk/ArticleBody?titleHb="+n.toString(),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+this._SessionToken}});return t.ok==!0?await t.json():null}}