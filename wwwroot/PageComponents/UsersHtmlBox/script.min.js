export class UsersHtmlBox{_Target
    _Position
    _ApiUrl
    _SessionToken
    _SessionRoleId

    _UrlContent
    _Take

    Name
    Page

    constructor(n,t,i,r,u,f){this._Target=n;this._Position=t;this._ApiUrl=i;this._SessionToken=r;this._SessionRoleId=u;this.Name=this.constructor.name;let o="/PageComponents/"+this.Name;this._UrlContent=o+"/content";let e=document.createElement("link");e.setAttribute("rel","stylesheet");e.setAttribute("href",o+"/style"+f+".css");document.head.append(e);this.Page=1;this._Take=50}async AppendList(){let n=await this._ApiGetList();n!=null&&n.length>0&&this.Page==1&&this._Target.insertAdjacentHTML(this._Position,this._HtmlPart());n.forEach(n=>{document.querySelector("#"+this.Name+" > ul").insertAdjacentHTML("beforeend",this._ItemHtmlBox(n.login,n.artn,n.title)),this._SessionRoleId>0&&this._SubscribButtonItemHtmlBox(n.login,n.subscribeType)});this.Page++}AppendItem(n,t,i){document.querySelector("#"+this.Name+" > ul").insertAdjacentHTML("afterbegin",this._ItemHtmlBox(n,t,i))}_HtmlPart(){return'        <div id="'+this.Name+'">            <ul>            <\/ul>        <\/div>'}_ItemHtmlBox(n,t,i){let u="/i/-"+n,r="";t>0&&(r='<div class="_ArticleN">                    <span>                    '+t+"                    <\/span>                <\/div>");return'        <li>            <div data-login="'+n+'">                <div>                    <a href ="'+u+'">                        <span>                        '+n+"                        <\/span>                    <\/a>                    "+r+"                <\/div>                <div>                    <span>                    "+i+"                    <\/span>                <\/div>            <\/div>        <\/li>"}_SubscribButtonItemHtmlBox(n,t){let r='        <a class="_SubscribB" data-subscribeType="'+t+'">            <img />        <\/a>';document.querySelector("#"+this.Name+' > ul > li > div[data-login="'+n+'"] > div:first-child > *:nth-child(1)').insertAdjacentHTML("afterend",r);let i=document.querySelector("#"+this.Name+' > ul > li > div[data-login="'+n+'"] ._SubscribB');i.addEventListener("click",async()=>{let r=await this._ApiUserSubscrib(n);r.ok&&(t==0?(t=2,i.setAttribute("data-subscribeType",t)):t==2?(t=0,i.setAttribute("data-subscribeType",t)):t==3?(t=4,i.setAttribute("data-subscribeType",t)):t==4&&(t=3,i.setAttribute("data-subscribeType",t)))})}async _ApiGetList(){const n=await fetch(this._ApiUrl+"/RtInk/Users?take="+this._Take+"&page="+this.Page,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+this._SessionToken}});return n.ok===!0?await n.json():null}async _ApiUserSubscrib(n){const t=await fetch(this._ApiUrl+"/Base/User/Subscrib?userLogin="+n,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+this._SessionToken}});return t.ok===!0?await t.json():null}}